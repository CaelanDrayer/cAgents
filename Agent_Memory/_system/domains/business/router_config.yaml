# Business Domain Router Configuration
# Complexity classification and template matching for business operations

domain: business
version: 1.0
description: "Tier classification and routing for business operations, strategy, and analysis tasks"

# Tier Classification Rules
# How to assign tiers 0-4 for business domain tasks

tier_classification:
  tier_0_indicators:
    - "Question about business concept or definition"
    - "Explanation request"
    - "How to interpret business metric"
    keywords: [what, how, explain, define, interpret]
    examples:
      - "What is EBITDA?"
      - "How do I calculate ROI?"
      - "Explain market segmentation"

  tier_1_indicators:
    - "Simple data lookup or single cell update"
    - "Send single email or notification"
    - "Update single field in document"
    - "Quick calculation"
    scope: single_item
    time_estimate: "< 30 minutes"
    examples:
      - "Update Q3 revenue figure to $2.5M"
      - "Send meeting reminder to stakeholders"
      - "Calculate profit margin for product X"

  tier_2_indicators:
    - "Standard analysis or report"
    - "Single forecast or budget"
    - "Process documentation"
    - "Market research on single topic"
    scope: single_deliverable
    time_estimate: "1-4 hours"
    required_agents: 1-2
    examples:
      - "Create Q4 revenue forecast"
      - "Analyze competitor pricing"
      - "Document current hiring process"
      - "Create department budget"

  tier_3_indicators:
    - "Strategic planning"
    - "Complex analysis with multiple data sources"
    - "Process redesign"
    - "Multi-scenario modeling"
    - "Cross-functional coordination"
    scope: multi_component
    time_estimate: "4-12 hours"
    required_agents: 3-5
    stakeholder_involvement: high
    examples:
      - "Develop 3-year strategic plan"
      - "Design new customer onboarding process"
      - "Create market entry strategy for new region"
      - "Build financial model with 5 scenarios"

  tier_4_indicators:
    - "Company-wide transformation"
    - "M&A analysis"
    - "Major process overhaul"
    - "Multi-year strategic initiatives"
    - "Organizational restructuring"
    scope: enterprise_wide
    time_estimate: "> 12 hours"
    required_agents: 5+
    executive_approval_required: true
    hitl_checkpoints: multiple
    examples:
      - "Plan company merger integration"
      - "Design organizational transformation"
      - "Develop 5-year growth strategy"
      - "Restructure entire operations"

# Task Templates
# Common business task patterns with default tiers

templates:
  create_forecast:
    description: "Financial or business metric forecasting"
    default_tier: 2
    keywords: [forecast, predict, project, estimate, future]
    required_entities: [time_period, metric]
    optional_entities: [scenarios, assumptions]
    scope_adjustments:
      - condition: "Multiple scenarios required"
        adjustment: +1
      - condition: "Requires CFO/executive approval"
        adjustment: +1
      - condition: "Single metric, single period"
        adjustment: 0
    examples:
      - "Create Q4 2026 revenue forecast"
      - "Project headcount needs for next year"
      - "Estimate market size for new product"

  strategic_plan:
    description: "Strategic planning and roadmap creation"
    default_tier: 3
    keywords: [strategy, strategic, plan, roadmap, initiative]
    required_entities: [scope, time_horizon]
    optional_entities: [objectives, constraints]
    scope_adjustments:
      - condition: "Department-level strategy"
        adjustment: 0
      - condition: "Company-wide strategy"
        adjustment: +1
      - condition: "Single quarter timeframe"
        adjustment: -1
    examples:
      - "Create product strategy for 2027"
      - "Develop go-to-market strategy"
      - "Build 3-year growth plan"

  market_analysis:
    description: "Market research and competitive analysis"
    default_tier: 2
    keywords: [market, competitive, research, analysis, landscape]
    required_entities: [market, focus_area]
    optional_entities: [competitors, geography]
    scope_adjustments:
      - condition: "Multiple markets or geographies"
        adjustment: +1
      - condition: "Deep competitive intelligence required"
        adjustment: +1
      - condition: "Single competitor analysis"
        adjustment: 0
    examples:
      - "Analyze SaaS market landscape"
      - "Research competitor pricing strategies"
      - "Study market trends in healthcare"

  process_design:
    description: "Business process design or redesign"
    default_tier: 2
    keywords: [process, workflow, procedure, redesign, optimize]
    required_entities: [process_name]
    optional_entities: [stakeholders, constraints]
    scope_adjustments:
      - condition: "Affects multiple departments"
        adjustment: +1
      - condition: "Requires system changes"
        adjustment: +1
      - condition: "Simple process documentation"
        adjustment: -1
    examples:
      - "Design employee onboarding process"
      - "Redesign procurement workflow"
      - "Optimize sales pipeline process"

  budget_creation:
    description: "Budget planning and allocation"
    default_tier: 2
    keywords: [budget, allocation, spend, funding]
    required_entities: [time_period, scope]
    optional_entities: [constraints, priorities]
    scope_adjustments:
      - condition: "Company-wide budget"
        adjustment: +1
      - condition: "Multiple departments"
        adjustment: +1
      - condition: "Single department budget"
        adjustment: 0
    examples:
      - "Create 2027 marketing budget"
      - "Allocate Q1 department budgets"
      - "Plan capital expenditure budget"

  risk_assessment:
    description: "Risk identification and mitigation planning"
    default_tier: 2
    keywords: [risk, threat, vulnerability, mitigation]
    required_entities: [scope, risk_type]
    optional_entities: [impact, likelihood]
    scope_adjustments:
      - condition: "Enterprise-wide risk assessment"
        adjustment: +1
      - condition: "Multiple risk categories"
        adjustment: +1
      - condition: "Single project risk"
        adjustment: 0
    examples:
      - "Assess cybersecurity risks"
      - "Evaluate market entry risks"
      - "Identify supply chain vulnerabilities"

  stakeholder_communication:
    description: "Stakeholder updates, presentations, reports"
    default_tier: 1
    keywords: [present, report, update, communicate, brief]
    required_entities: [audience, topic]
    optional_entities: [format, deadline]
    scope_adjustments:
      - condition: "Board or executive presentation"
        adjustment: +1
      - condition: "Complex multi-topic report"
        adjustment: +1
      - condition: "Simple status update"
        adjustment: 0
    examples:
      - "Create board presentation on Q3 results"
      - "Prepare executive summary"
      - "Write stakeholder update email"

  data_analysis:
    description: "Business data analysis and insights"
    default_tier: 2
    keywords: [analyze, data, metrics, insights, trends]
    required_entities: [dataset, question]
    optional_entities: [time_period, segments]
    scope_adjustments:
      - condition: "Multiple data sources"
        adjustment: +1
      - condition: "Complex statistical analysis"
        adjustment: +1
      - condition: "Simple trend analysis"
        adjustment: 0
    examples:
      - "Analyze customer churn data"
      - "Identify sales trends by region"
      - "Study product adoption metrics"

  business_case:
    description: "Business case or ROI analysis"
    default_tier: 2
    keywords: [business case, roi, justification, cost-benefit]
    required_entities: [initiative, scope]
    optional_entities: [timeline, alternatives]
    scope_adjustments:
      - condition: "Large capital investment"
        adjustment: +1
      - condition: "Multiple alternatives to compare"
        adjustment: +1
      - condition: "Simple ROI calculation"
        adjustment: -1
    examples:
      - "Build business case for new CRM"
      - "Calculate ROI for marketing campaign"
      - "Justify headcount increase"

  vendor_evaluation:
    description: "Vendor selection and evaluation"
    default_tier: 2
    keywords: [vendor, supplier, selection, RFP, procurement]
    required_entities: [category, requirements]
    optional_entities: [budget, timeline]
    scope_adjustments:
      - condition: "Enterprise-wide vendor"
        adjustment: +1
      - condition: "Formal RFP process"
        adjustment: +1
      - condition: "Quick vendor comparison"
        adjustment: 0
    examples:
      - "Evaluate CRM vendors"
      - "Select cloud infrastructure provider"
      - "Compare consulting firms"

# Scope Adjustment Rules
# Additional factors that increase/decrease tier

scope_adjustments:
  increase_tier:
    - indicator: "Affects multiple business units"
      adjustment: +1
    - indicator: "Requires C-level approval"
      adjustment: +1
    - indicator: "Board presentation required"
      adjustment: +1
    - indicator: "Regulatory compliance critical"
      adjustment: +1
    - indicator: "Multi-million dollar impact"
      adjustment: +1
    - indicator: "Multiple external stakeholders"
      adjustment: +1
    - indicator: "Cross-functional coordination"
      adjustment: +1

  decrease_tier:
    - indicator: "Template or previous example exists"
      adjustment: -1
    - indicator: "Single department scope"
      adjustment: 0
    - indicator: "Routine/recurring task"
      adjustment: -1
    - indicator: "Low business impact"
      adjustment: -1

# Calibration Tracking
# Historical accuracy of tier assignments

calibration:
  total_routed: 0
  tier_accuracy:
    tier_0: {assigned: 0, correct: 0, over: 0, under: 0, accuracy: 0.0}
    tier_1: {assigned: 0, correct: 0, over: 0, under: 0, accuracy: 0.0}
    tier_2: {assigned: 0, correct: 0, over: 0, under: 0, accuracy: 0.0}
    tier_3: {assigned: 0, correct: 0, over: 0, under: 0, accuracy: 0.0}
    tier_4: {assigned: 0, correct: 0, over: 0, under: 0, accuracy: 0.0}

  template_accuracy:
    create_forecast: {used: 0, success: 0, accuracy: 0.0}
    strategic_plan: {used: 0, success: 0, accuracy: 0.0}
    market_analysis: {used: 0, success: 0, accuracy: 0.0}
    process_design: {used: 0, success: 0, accuracy: 0.0}
    budget_creation: {used: 0, success: 0, accuracy: 0.0}
    risk_assessment: {used: 0, success: 0, accuracy: 0.0}
    stakeholder_communication: {used: 0, success: 0, accuracy: 0.0}
    data_analysis: {used: 0, success: 0, accuracy: 0.0}
    business_case: {used: 0, success: 0, accuracy: 0.0}
    vendor_evaluation: {used: 0, success: 0, accuracy: 0.0}

  common_patterns:
    - pattern: "Financial forecasts typically tier 2-3"
      observation: "Scope and scenario count drive tier"
    - pattern: "Strategic plans typically tier 3-4"
      observation: "Time horizon and organizational scope key factors"
    - pattern: "Process documentation tier 1-2"
      observation: "Process redesign jumps to tier 2-3"
    - pattern: "Stakeholder communications tier 1-2"
      observation: "Audience seniority affects tier"

# Domain-Specific Notes

domain_notes: |
  Business domain routing considerations:

  **Time Horizons Matter**:
  - Quarterly focus: Usually tier 2
  - Annual planning: Usually tier 2-3
  - Multi-year strategy: Usually tier 3-4

  **Stakeholder Seniority**:
  - Department heads: Tier 2
  - C-level executives: Tier 3
  - Board of directors: Tier 3-4

  **Financial Impact**:
  - < $100K: Tier 1-2
  - $100K-$1M: Tier 2-3
  - > $1M: Tier 3-4

  **Common Tier Mistakes**:
  - Under-tiering strategic work (assign tier 3 minimum)
  - Over-tiering routine reports (tier 1-2 usually sufficient)
  - Missing cross-functional scope (requires tier increase)
  - Underestimating stakeholder coordination time

  **Business Domain Velocity**:
  - Business work often requires more stakeholder coordination than software
  - HITL approvals common for tier 3-4 (CFO, CEO approval points)
  - Data quality critical - missing sources can block completion
  - Formatting matters - reports must follow corporate templates
